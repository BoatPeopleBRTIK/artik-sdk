CMAKE_MINIMUM_REQUIRED	( VERSION 2.8 )
PROJECT			( artik-sdk-media C CXX )

PKG_CHECK_MODULES (GST REQUIRED gstreamer-1.0)
PKG_CHECK_MODULES ( GLIB REQUIRED glib-2.0 )


SET ( LIB_MEDIA artik-sdk-media CACHE INTERNAL "" FORCE )
SET ( ARTIK_MEDIA_INCLUDE_DIR ${LIB_INC}/media CACHE INTERNAL "" FORCE )
SET ( ARTIK_MEDIA_LIBRARIES ${LIB_MEDIA} CACHE INTERNAL "" FORCE )

SET ( SRC_MEDIA
					linux_media.c
					artik_media.c
					cpp/artik_media.cpp
)

ADD_LIBRARY ( ${LIB_MEDIA} SHARED ${SRC_MEDIA} )

TARGET_INCLUDE_DIRECTORIES ( ${LIB_MEDIA} PUBLIC
							 ${ARTIK_BASE_INCLUDE_DIR}
							 ${ARTIK_MEDIA_INCLUDE_DIR}
							 ${GLIB_INCLUDE_DIRS}
							 ${GST_INCLUDE_DIRS}
							 ${ARTIK_BASE_INCLUDE_DIR}/cpp
							 ${ARTIK_MEDIA_INCLUDE_DIR}/cpp
)

TARGET_LINK_LIBRARIES ( ${LIB_MEDIA}
						${LIB_BASE}
						${GLIB_LIBRARIES}
						${GST_LIBRARIES}
)

SET_TARGET_PROPERTIES ( ${LIB_MEDIA} PROPERTIES VERSION ${LIB_VERSION_MAJOR}.${LIB_VERSION_MINOR}.${LIB_VERSION_PATCH} SOVERSION ${LIB_VERSION_MAJOR} OUTPUT_NAME ${LIB_MEDIA} )

INSTALL ( TARGETS ${LIB_MEDIA} LIBRARY DESTINATION lib )
FILE ( GLOB MEDIA_HEADERS "${LIB_INC}/media/*.h" )
FILE ( GLOB MEDIA_HEADERS_CPP "${LIB_INC}/media/cpp/*.hh" )
INSTALL ( FILES ${MEDIA_HEADERS} DESTINATION include/artik/media )
INSTALL ( FILES ${MEDIA_HEADERS_CPP} DESTINATION include/artik/media/cpp )
