CMAKE_MINIMUM_REQUIRED	( VERSION 2.8 )
PROJECT			( artik-sdk-sensor C CXX )

SET ( LIB_SENSOR artik-sdk-sensor CACHE INTERNAL "" FORCE )
SET ( ARTIK_SENSOR_INCLUDE_DIR ${LIB_INC}/sensor CACHE INTERNAL "" FORCE )
SET ( ARTIK_SENSOR_LIBRARIES ${LIB_SENSOR} CACHE INTERNAL "" FORCE )

INCLUDE ( devices/CMakeLists.txt )

SET ( SRC_SENSOR
					artik_sensor.c
					linux_sensor.c
					${SRC_SENSOR_DEVICES}
					cpp/artik_sensor.cpp
)

ADD_LIBRARY ( ${LIB_SENSOR} SHARED ${SRC_SENSOR} )

TARGET_INCLUDE_DIRECTORIES ( ${LIB_SENSOR} PUBLIC
							 ${ARTIK_BASE_INCLUDE_DIR}
							 ${ARTIK_SENSOR_INCLUDE_DIR}
							 ${ARTIK_SYSTEMIO_INCLUDE_DIR}
							 ${ARTIK_BASE_INCLUDE_DIR}/cpp
							 ${ARTIK_SYSTEMIO_INCLUDE_DIR}/cpp
							 ${ARTIK_SENSOR_INCLUDE_DIR}/cpp
)

TARGET_LINK_LIBRARIES ( ${LIB_SENSOR}
						${LIB_BASE}
						${LIB_SYSTEMIO}
)

SET_TARGET_PROPERTIES ( ${LIB_SENSOR} PROPERTIES VERSION ${LIB_VERSION_MAJOR}.${LIB_VERSION_MINOR}.${LIB_VERSION_PATCH} SOVERSION ${LIB_VERSION_MAJOR} OUTPUT_NAME ${LIB_SENSOR} )

INSTALL ( TARGETS ${LIB_SENSOR} LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}" )
FILE ( GLOB SENSOR_HEADERS "${LIB_INC}/sensor/*.h" )
FILE ( GLOB SENSOR_HEADERS_CPP "${LIB_INC}/sensor/cpp/*.hh" )
FILE ( GLOB SENSOR_HEADERS_PLATFORM "${LIB_INC}/sensor/platform/*.h" )
INSTALL ( FILES ${SENSOR_HEADERS} DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/artik/sensor" )
INSTALL ( FILES ${SENSOR_HEADERS_CPP} DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/artik/sensor/cpp" )
INSTALL ( FILES ${SENSOR_HEADERS_PLATFORM} DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/artik/sensor/platform" )
